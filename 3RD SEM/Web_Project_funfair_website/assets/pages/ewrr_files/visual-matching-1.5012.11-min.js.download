var cameraDiv, serachDiv, visualSearchResources, searchOptionEventsArr, isDragDrop = function () { var e = document.createElement("div"); return ("draggable" in e || "ondragstart" in e && "ondrop" in e) && "FormData" in window && "FileReader" in window }(); switch (searchOptionEventsArr = { OptionValue_0: "All images", OptionValue_1: "Photographs", OptionValue_8: "Vectors", OptionValue_2: "Illustrations", OptionValue_4: "Social", OptionValue_16: "360 Images", OptionValue_footage: "Footage", OptionValue_livenews: "Live News" }, http_Culture) { case "en": visualSearchResources = { SearchWithAnImageFile: "Search with an image file or link to find similar images", SeachByImage: "Search by image", UploadAnImage: "Upload an image", PasteImageLink: "Paste image link", DragAndDropAnImage: "Drag and drop an image anywhere here", Or: "or", ChooseFile: "Choose a file", YouCanUploadJPG: "You can upload a JPG or PNG image, up to 5MB in file size.", PleaseSelectJPG: "Please select a JPG or PNG file of less than 5MB in file size.", PasteYourImageLink: "Paste your image link here...", YourImageLinkShouldEndWith: "Your image link should end with JPG or PNG", PleaseEnterValidImageURL: "Please enter a valid image URL ending in JPG or PNG", VisuallySimilarResults: "Visually similar results", PleaseSelectValidImage: "Please select a valid JPG or PNG image", SearchFor16: "Search for 360° images", SearchForfootage: "Search for footage", SearchFor2: "Search for illustrations", SearchFor0Mobile: "Search for images", SearchFor1: "Search for photographs", SearchFor4: "Search for social images", SearchFor0: "Search for stock images, vectors and videos", SearchFor8: "Search for vectors", SearchForlivenews: "Search the live news feed" }; break; case "de": visualSearchResources = { SearchWithAnImageFile: "Ähnliche Bilder über Bilddatei oder Link suchen", SeachByImage: "Ähnlichkeitssuche", UploadAnImage: "Bild hochladen", PasteImageLink: "Link einfügen", DragAndDropAnImage: "Bild an beliebiger Stelle einfügen", Or: "oder", ChooseFile: "Datei wählen", YouCanUploadJPG: "Bild lässt sich als JPG oder PNG Datei bis 5 MB hochladen.", PleaseSelectJPG: "Bitte eine JPG oder PNG Datei unter 5 MB wählen.", PasteYourImageLink: "Link des Bildes hier einfügen", YourImageLinkShouldEndWith: "Link des Bildes endet mit JPG oder PNG", PleaseEnterValidImageURL: "Gültige Bild-URL mit JPG oder PNG Endung eingeben", VisuallySimilarResults: "Ergebnisse optisch gleich", PleaseSelectValidImage: "Bitte zulässiges JPG oder PNG Bild wählen", SearchFor16: "360° Bilder suchen", SearchForfootage: "Filme suchen", SearchFor2: "Illustrationen suchen", SearchFor0Mobile: "Bilder suchen", SearchFor1: "Fotos suchen", SearchFor4: "Handyfotos suchen", SearchFor0: "Stockbilder, Vektoren und Videos suchen", SearchFor8: "Vektoren suchen", SearchForlivenews: "Live News durchsuchen" }; break; case "es": visualSearchResources = { SearchWithAnImageFile: "Busca imágenes similares utilizando un archivo o un link.", SeachByImage: "Buscar por imagen", UploadAnImage: "Subir una imagen", PasteImageLink: "Pegar link", DragAndDropAnImage: "Arrastra y suelta una imagen aquí", Or: "ó", ChooseFile: "Elige un archivo", YouCanUploadJPG: "Puede subir imágenes JPG o PNG con un tamaño del archivo de hasta 5 Mb.", PleaseSelectJPG: "Elija un fichero JPG o PNG con un tamaño del archivo de 5 Mb o menos.", PasteYourImageLink: "Pegue su enlace de la imagen aquí...", YourImageLinkShouldEndWith: "El enlace de su imagen debe terminar en JPG o PNG", PleaseEnterValidImageURL: "Introduzca un URL de la imagen válido que termine en JPG o PNG", VisuallySimilarResults: "Resultados similares visualmente", PleaseSelectValidImage: "Seleccione una imagen JPG o PNG válida.", SearchFor16: "Buscar imágenes 360º", SearchForfootage: "Buscar vídeo", SearchFor2: "Buscar ilustraciones", SearchFor0Mobile: "Buscar imágenes", SearchFor1: "Buscar fotografías", SearchFor4: "Buscar imágenes sociales", SearchFor0: "Buscar imágenes, vectores y vídeos", SearchFor8: "Buscar vectores", SearchForlivenews: "Search the live news feed" }; break; case "fr": visualSearchResources = { SearchWithAnImageFile: "Rechercher avec un fichier d’image ou un lien pour trouver des images semblables", SeachByImage: "Rechercher par image", UploadAnImage: "Charger une image", PasteImageLink: "Coller lien image", DragAndDropAnImage: "Glisser-Déplacer une image ici", Or: "ou", ChooseFile: "Choisir un fichier", YouCanUploadJPG: "Vous pouvez charger une image JPEG ou PNG de 5 Mo max.", PleaseSelectJPG: "Sélectionnez un fichier JPEG ou PNG de moins de 5 Mo.", PasteYourImageLink: "Collez votre lien d’image ici", YourImageLinkShouldEndWith: "L’extension de votre lien d’image doit être JPEG ou PNG.", PleaseEnterValidImageURL: "Veuillez saisir une URL d’image valide avec l’extension JPEG ou PNG.", VisuallySimilarResults: "Résultats visuellement semblables", PleaseSelectValidImage: "Sélectionnez une image JPEG ou PNG valide.", SearchFor16: "Rechercher des images 360°", SearchForfootage: "Rechercher des vidéos", SearchFor2: "Rechercher des illustrations", SearchFor0Mobile: "Rechercher des images", SearchFor1: "Rechercher des photographies", SearchFor4: "Rechercher des images sociales", SearchFor0: "Rechercher des banques d’images, vecteurs et vidéos", SearchFor8: "Rechercher des vecteurs", SearchForlivenews: "Search the live news feed" }; break; case "it": visualSearchResources = { SearchWithAnImageFile: "Cerca con un file immagine o un link per trovare immagini simili", SeachByImage: "Cerca per immagine", UploadAnImage: "Carica un’immagine", PasteImageLink: "Incolla immagine", DragAndDropAnImage: "Trascina e rilascia un’immagine ovunque qui", Or: "oppure", ChooseFile: "Scegli un file", YouCanUploadJPG: "Puoi caricare un’immagine JPG o PNG con dimensione fino a 5 MB.", PleaseSelectJPG: "Seleziona un file JPG o PNG di dimensione inferiore a 5 MB.", PasteYourImageLink: "Incolla qui il link dell’immagine...", YourImageLinkShouldEndWith: "Il link dell’immagine deve terminare con JPG o PNG", PleaseEnterValidImageURL: "Inserisci l’URL di un’immagine valido che termini con JPG o PNG", VisuallySimilarResults: "Risultati visivamente simili", PleaseSelectValidImage: "Seleziona un’immagine JPG o PNG valida", SearchFor16: "Cerca immagini a 360°", SearchForfootage: "Cerca video", SearchFor2: "Cerca illustrazioni", SearchFor0Mobile: "Cerca immagini", SearchFor1: "Cerca fotografie", SearchFor4: "Cerca immagini social", SearchFor0: "Cerca immagini stock, vettoriali e video", SearchFor8: "Cerca vettoriali", SearchForlivenews: "Search the live news feed" }; break; default: visualSearchResources = { SearchWithAnImageFile: "Search with an image file or link to find similar images", SeachByImage: "Seach by image", UploadAnImage: "Upload an image", PasteImageLink: "Paste image link", DragAndDropAnImage: "Drag and drop an image anywhere here", Or: "or", ChooseFile: "Choose a file", YouCanUploadJPG: "You can upload a JPG or PNG image, up to 5MB in file size.", PleaseSelectJPG: "Please select a JPG or PNG file of less than 5MB in file size.", PasteYourImageLink: "Paste your image link here...", YourImageLinkShouldEndWith: "Your image link should end with JPG or PNG", PleaseEnterValidImageURL: "Please enter a valid image URL ending in JPG or PNG", VisuallySimilarResults: "Visually similar results", PleaseSelectValidImage: "Please select a valid JPG or PNG image", SearchFor16: "Search for 360° images", SearchForfootage: "Search for footage", SearchFor2: "Search for illustrations", SearchFor0Mobile: "Search for images", SearchFor1: "Search for photographs", SearchFor4: "Search for social images", SearchFor0: "Search for stock images, vectors and videos", SearchFor8: "Search for vectors", SearchForlivenews: "Search the live news feed" } } serachDiv = "<div class='visual-image-search-bg'></div><div class='visual-image-search-container'><i id='btnClose' class='icon-close'></i><div class='align-center sm-show mb-20'><img src='https://static.alamy.com/images/alamy-white.gif'></div><span class='block bold ft-18 sm-txt-center'>" + visualSearchResources.SeachByImage + "</span><ul><li id='UploadAnImage' class='active on'><span class='block ft-14'>" + visualSearchResources.UploadAnImage + "</span></li><li id='PasteImageLink'><span class='block ft-14'>" + visualSearchResources.PasteImageLink + "</span></li></ul><div class='img-tab t1'><div class='up-sec'><i id='ReverseImageIcon' class='icon-camera'></i><div class='drop-btn'>", isDragDrop && (serachDiv += "<span class='hide-drtxt'>" + visualSearchResources.DragAndDropAnImage + "<br>" + visualSearchResources.Or + "<br></span>"), serachDiv += "<button id='btnChooseFile'>" + visualSearchResources.ChooseFile + "</button><input type='file' id='fileupload' title='' value='Choose a file' accept='.png,.jpg,.jpeg' onclick='onClickVisualSearchImage(this)'></div></div><div class='foot-msgs align-center'>" + visualSearchResources.YouCanUploadJPG + "</div></div><div class='img-tab t2'><input type='text' id='imgfinder' placeholder='" + visualSearchResources.PasteYourImageLink + "'> <a id='btnSearchByLink' title='Search' class='btn btn-search homepage' onclick='readVisualSearchImageUrl()'><i class='icon-search white homepage'></i></a><div class='foot-msgs mt-12'>" + visualSearchResources.YourImageLinkShouldEndWith + "</div></div></div><div class='visual-search-loader'></div>", cameraDiv = "<div class='visual-image-search-holder'>", cameraDiv += "<i id='ReverseImageIcon' class='icon-camera'></i><div id='camera-hover' class='absolute'><div class='your-icon-tooltip absolute'></div><p class='white'>" + visualSearchResources.SearchWithAnImageFile + "</p>"; var visualMatchStyles = ".visual-image-search-bg{z-index: 9999998;display:none;position: fixed;top: 0;left:0;width: 100%;height: 100%;background: #393939;opacity:.65;filter: alpha(opacity=65)}.visual-image-search-holder{cursor:pointer;margin-top: -10px;display: inline-block;position: absolute;top:50%;right: 69px;}#search-bar-q .visual-image-search-holder{right: 68px;}.visual-image-search-holder i{font-size: 17px!important;top: 2px!important;position: relative!important;}.visual-image-search-holder i:after{position: absolute;width: calc(100% + 20px);height: calc(200%);content: '';left: -10px;top: -60%;}.home .visual-image-search-holder i:after, #search-bar-q .visual-image-search-holder i:after{width: calc(100% + 20px);height: calc(300%);content: '';top: -100%;}.visual-image-search-container{display:none;position:absolute;background:#fff;padding:40px;border-radius:8px;box-sizing: border-box;border: 1px solid #d6d6da;box-shadow: -1px 7px 13px #00000042;z-index: 9999999;top: -8px;color:#323248;width:900px;left:50%;transform: translateX(-50%);top: -4000px;transition: all .3s ease;}.home .visual-image-search-holder{right:80px}.visual-image-search-container .icon-close{position: absolute;right: 15px;top:15px;color: #ccc;cursor:pointer;font-size: 12px;}.visual-image-search-container .icon-close:hover{color:#323248}.visual-image-search-container .icon-close:after {position: absolute;padding: 10px;content: '';left: -4px;top: -5px;}.visual-image-search-container .ft-18{font-size: 18px;}.visual-image-search-container .ft-16{font-size: 16px;}.visual-image-search-container .ft-14{font-size: 14px;}.input-group-addon{display:none}.visual-image-search-container input{float:none!important}.visual-image-search-container #imgfinder{width: calc(100% - 61px);padding: 11px;outline:0;line-height: normal;border: 1px solid #969696;border-right:0;height: 60px;box-sizing: border-box;vertical-align: middle;margin-right: -4px;border-radius: 4px 0 0 4px;font-size: 18px;padding-left:20px}.visual-image-search-container #imgfinder::placeholder{color: #969696;opacity: 1;}.visual-image-search-container #imgfinder:-ms-input-placeholder{color:#969696}.visual-image-search-container #imgfinder::-ms-input-placeholder {color:#969696}.visual-image-search-container #fileupload {position: fixed;top: -1000px;left: -1000px;/*width: 100%;height:100%;*/box-sizing: border-box;opacity:0;}.visual-image-search-container button{font-size: 13px; padding:13px 11px 12px;position: relative;background: #268efc;color: #fff;cursor:pointer;outline:0;border:0;line-height: normal;vertical-align: middle;}.visual-image-search-container button:hover{background:#1661a5;}.visual-image-search-container .drop-btn{text-align:center;font-size: 18px;line-height: 48px;color: #393939;}.visual-image-search-container .drop-btn button{padding: 8px 25px;border-radius: 5px;margin-top: 10px;font-size:18px;width:220px;height:52px;z-index:1}.visual-image-search-container ul{padding:0 15px 10px 0;list-style:none;border-bottom:1px solid #efefef;margin:12px 0 0}.visual-image-search-container ul li{display:inline-block;position: relative;margin-right: 14px;cursor:pointer;bottom:-11px;padding: 0 15px 11px;box-sizing:border-box}.visual-image-search-container ul li:hover{border-bottom: 2px solid #cccccc;}.visual-image-search-container ul li.active, .visual-image-search-container ul li.on, .visual-image-search-container ul li.active:hover, .visual-image-search-container ul li.on:hover {border-bottom: 2px solid #268efc;cursor: default;}.visual-image-search-container .img-tab{display:none;margin:20px 0}.visual-image-search-container .img-tab.t1{display:block;position: relative;}.visual-image-search-container .img-tab .up-sec{border: 4px dashed #d6d6da;padding: 40px;margin-bottom: 20px;background: #efefef;position: relative;}.visual-image-search-container .img-tab .up-sec.drag-over{border: 4px dashed #969696;}.visual-image-search-container .img-tab .up-sec.drag-over .drop-btn button{z-index:0;}.visual-image-search-container .img-tab .icon-camera{margin: 0 auto;display: block;font-size: 78px;width: 100px;margin-bottom: 23px;}.visual-image-search-container .img-tab #btnSearchByLink {height: 60px;width: 60px;position: relative;display: inline-block;box-sizing: border-box;vertical-align: bottom;border-radius: 0 4px 4px 0;}.visual-image-search-container .img-tab #btnSearchByLink .icon-search.homepage {font-size: 24px;position: absolute;left: 18px;top: 18px;} .visual-image-search-container .img-tab .foot-msgs{color:#969696;margin-bottom:20px;font-size:14px} .visual-search-loader{background: url(https://static.alamy.com/images/branding/search-results/loading-searchresults.gif) 50% 50% no-repeat #fff;position:fixed;width:100%;height:100%;z-index:99999;opacity:.7;display:none;top:0;left:0}#camera-hover .your-icon-tooltip{height: 14px;width: 14px;top: 3%;margin-top: -16px;right: 47px;left: 50%; margin-left: -9px;border-left: 10px solid transparent;border-right: 10px solid transparent;border-bottom: 10px solid rgb(57,57,57);border-bottom: 10px solid rgb(57,57,57,.8);box-sizing:border-box;}#camera-hover{z-index: 9999;display: none; top: 36px;width: auto;left: -45px;color: rgb(255, 255, 255);border: 0;padding: 12px; transform: translateX(-50%);left: 50%;font-size: 12px;line-height: 16px;background: rgb(57,57,57);background: rgb(57,57,57,.8);min-width: 175px;}.home #camera-hover{top:41px} #camera-hover p{padding:0;margin:0;font-size:12px;line-height: 16px;}.visual-image-search-container .align-center{text-align:center}.visual-image-search-container .mt-12{margin-top:12px}.visual-image-search-container .mb-20{margin-bottom:20px}.visual-image-search-container .error-msg{color:#dc3545 !important;}.foc-qt .visual-image-search-holder{display:none}.visual-image-search-container .sm-show{display:none}.input-group-addon.no-reverse-search{display:block!important}.no-scroll-bd{overflow:hidden!important;}.img-tab.t1 .up-sec.drag-over *{pointer-events: none;}.home-Iq .visual-image-search-holder{margin-top: -20px;}.home-Iq #search::-webkit-input-placeholder{font-size:25px}.home-Iq #search::-moz-placeholder{font-size:25px}.home-Iq #search:-ms-input-placeholder{font-size:25px}.home-Iq #search:-moz-placeholder{font-size:25px}.new-feature-ris{position:absolute;bottom: 42px;right: -53px;pointer-events: none;}@media (min-width: 1025px){}@media (min-width: 1024px){   .visual-image-search-holder:hover i{color:#268efc}   .visual-image-search-holder .icon-camera:hover ~ #camera-hover, #camera-hover:hover{display:block}}@media (max-width: 768px){    .visual-image-search-container{width: calc(100% - 80px);left:40px;transform: none;}    .visual-image-search-container .hide-drtxt{display:none}    .no-scroll-bd{position:fixed;width:100%} }@media (max-width: 767px){    .visual-image-search-container{width: 100%;height:100%;left:0;transform: none;padding: 20px;border-radius: 0;}    .visual-image-search-container .sm-txt-center{text-align:center}    .visual-image-search-container .sm-show{display:block}     .visual-image-search-container #imgfinder{font-size:16px;width: calc(100% - 52px);}    .visual-image-search-container #imgfinder, .visual-image-search-container .img-tab #btnSearchByLink{height: 52px;}     .visual-image-search-container .img-tab #btnSearchByLink{width:52px}    .visual-image-search-container .img-tab #btnSearchByLink .icon-search.homepage{top:13px;left:13px}    .visual-image-search-container ul{padding-right:0}    .visual-image-search-container ul li{width: 50%;padding: 0 0 11px;text-align: center;margin: 0;}    .new-feature-ris{bottom: 36px;}}@media (max-height: 500px){     .visual-image-search-container #ReverseImageIcon.icon-camera{display:none}     .visual-image-search-container .drop-btn button{margin-top:0} }@media (max-width: 330px){   .visual-image-search-container ul li{padding: 0 5px 11px;}   .visual-image-search-container .img-tab .up-sec{padding: 20px;} }"; function setPlaceholderText() { if ($(window).width() < 768) var e = visualSearchResources.SearchFor0Mobile; else e = visualSearchResources.SearchFor0; var a = $("#select_searchoptions").attr("selected-value"); void 0 === a && (a = "0"), "videos" == a && (a = "footage"), $(window).width() < 768 && 0 == a && (a += "Mobile"), void 0 === (e = visualSearchResources["SearchFor" + a]) && (e = visualSearchResources.SearchFor0); var i = $(".search-wrap, .form-search, .search-bar .input-group").find('input[type="text"]'); $(i).attr("placeholder", e) } function readVisualSearchImage(e) { var a = e[0].name.substr(e[0].name.lastIndexOf(".") + 1).toLowerCase(), i = createGuid() + "." + a; if (e[0]) { if (-1 != $.inArray(a, ["jpg", "png", "jpeg"])) { var r = new FileReader; r.addEventListener("load", function (a) { var r = a.target, o = new Image; o.addEventListener("load", function () { if (e[0].size / 1048576 <= 5) { setReverseImageSearchGTM("Upload an image"), $(".visual-image-search-container").animate({ top: -($(".visual-image-search-container").outerHeight() + 500) + "px" }, 200, function () { $(".visual-image-search-bg, .visual-image-search-container").fadeOut(), setTimeout(function () { $("body").removeClass("no-scroll-bd"), $("body").css("width", "100%") }, 260) }), $(".visual-search-loader").show(); var a = { fileName: i }; $.ajax({ url: ReverseImagePresignedUrlAPI, type: "POST", contentType: "application/json", dataType: "json", data: JSON.stringify(a), cache: !1, success: function (a) { sendImageToS3Bucket(a.url, e, i) }, error: function (e) { $(".visual-image-search-container .t1").find(".foot-msgs").html("get-presigned-url failed").addClass("error-msg"), $(".visual-search-loader, .visual-image-search-bg").hide() } }) } else $(".visual-image-search-container .t1").find(".foot-msgs").html(visualSearchResources.PleaseSelectJPG).addClass("error-msg"), $(".visual-search-loader, .visual-image-search-bg").hide() }), o.addEventListener("error", function () { $(".visual-image-search-container .t1").find(".foot-msgs").html(visualSearchResources.PleaseSelectValidImage).addClass("error-msg"), $(".visual-search-loader, .visual-image-search-bg").hide() }), o.src = r.result }), r.readAsDataURL(e[0]) } else $(".visual-image-search-container .t1").find(".foot-msgs").html(visualSearchResources.PleaseSelectValidImage).addClass("error-msg"), $(".visual-search-loader, .visual-image-search-bg").hide(), $("body").removeClass("no-scroll-bd") } } function readVisualSearchImageUrl() { var e = $("#imgfinder").val(), a = e.substr(e.lastIndexOf(".") + 1); -1 != $.inArray(a.toLowerCase(), ["jpg", "png", "jpeg"]) ? imageExists(e, function (a) { if (a) if (setReverseImageSearchGTM("Paste image link"), $(".visual-image-search-container").animate({ top: -($(".visual-image-search-container").outerHeight() + 500) + "px" }, 200, function () { $(".visual-image-search-bg, .visual-image-search-container").fadeOut(), setTimeout(function () { $("body").removeClass("no-scroll-bd"), $("body").css("width", "100%") }, 260) }), $(".visual-search-loader, .visual-image-search-bg").show(), "undefined" != typeof alamy_search && alamy_search) alamy_search._query._imageurl = e, alamy_search.clearAllFilters(!1), alamy_search._query.setSearchType("searchtypeReverseImage"), alamy_search._query._queryterm = "", alamy_search._query._queryterm_raw = "", alamy_search._query._pl = "", alamy_search._query._Random = (new Date).getTime(), alamy_search.doSearch(), $(".visual-search-loader, .visual-image-search-bg").hide(); else { var i = "" == NewURLPart ? "search.html?imageurl=" : "Imageresults.aspx?imageurl="; window.location.href = http_Or_Https_Path.slice(0, -1) + (NewURLPart ? "/search" : "") + NewURLPart + "/" + i + encodeURIComponent(e) + "&mode=" + IsIntranet } else $(".visual-image-search-container .t2").find(".foot-msgs").html(visualSearchResources.PleaseEnterValidImageURL).addClass("error-msg") }) : $(".visual-image-search-container .t2").find(".foot-msgs").html(visualSearchResources.PleaseEnterValidImageURL).addClass("error-msg") } function imageExists(e, a) { var i = new Image; i.onload = function () { a(!0) }, i.onerror = function () { a(!1) }, i.src = e } function onClickVisualSearchImage(e) { e.value = null } function sendImageToS3Bucket(e, a, i) { var r = a[0]; return $.ajax({ type: "PUT", url: e, contentType: r.fileType, processData: !1, data: r }).success(function () { if ("undefined" != typeof alamy_search && alamy_search) alamy_search._query._imageurl = i, alamy_search.clearAllFilters(!1), alamy_search._query.setSearchType("searchtypeReverseImage"), alamy_search._query._queryterm = "", alamy_search._query._queryterm_raw = "", alamy_search._query._pl = "", alamy_search._query._Random = (new Date).getTime(), alamy_search.doSearch(); else { var e = "" == NewURLPart ? "search.html?imageurl=" : "Imageresults.aspx?imageurl="; window.location.href = http_Or_Https_Path.slice(0, -1) + (NewURLPart ? "/search" : "") + NewURLPart + "/" + e + encodeURIComponent(i) + "&mode=" + IsIntranet } $(".visual-search-loader, .visual-image-search-bg").hide() }).error(function (e) { $(".visual-search-loader, .visual-image-search-bg").hide(), $(".visual-image-search-container .t1").find(".foot-msgs").html(e).addClass("error-msg") }), !1 } function createGuid() { var e = (new Date).getTime(); return "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g, function (a) { var i = (e + 16 * Math.random()) % 16 | 0; return e = Math.floor(e / 16), ("x" == a ? i : 3 & i | 8).toString(16) }) } $(document).ready(function () { var e = 50; $("body").append("<style>" + visualMatchStyles + "</style>"), $("body").append(serachDiv), $(".input-group-addon *").addClass("srch-bx-switcher"); var a = !1; if (("1" == ReverseImageSearchEnabled || "undefined" != typeof mode && "1" == mode) && (a = !0, "undefined" != typeof hideReverseImageIcon && hideReverseImageIcon && (a = !1)), a && $(".dropdown.input-group-addon").before($(cameraDiv)), $("body.home")[0] ? setPlaceholderText() : setTimeout(function () { setPlaceholderText() }, 1e3), e = $("#search-bar-q").length ? 80 : 50, $("#dropdown_searchoptions li").click(function (a) { var i = $(this).find("input").attr("value"); "videos" == i && (i = "footage"); var r = i; $(window).width() < 768 && 0 == i && (i += "Mobile"); var o = visualSearchResources["SearchFor" + i], s = $(".search-wrap, .form-search, .search-bar .input-group").find('input[type="text"]'); if ($(s).attr("placeholder", o), $(s).css({ "padding-right": $(".dropdown-wrapper").outerWidth() + e + "px" }), $(s).focus(), r != $("#select_searchoptions").attr("selected-value")) { var n = searchOptionEventsArr["OptionValue_" + r]; void 0 !== n && ($("#select_searchoptions").attr("selected-value", r), setSearchOptionsDropdownChangeGTM(n)) } }), $(".search-wrap, .form-search, .search-bar .input-group").find('input[type="text"]').length) { var i = $(".search-wrap, .form-search, .search-bar .input-group").find('input[type="text"]'); i.click(function () { $(this).closest(".input-group, .search-bar").addClass("foc-qt"), $(".input-group-addon").show(), $(this).val().length > 0 ? ($(".search-clear-icon").show(), $(this).css({ "padding-right": $(".dropdown-wrapper").outerWidth() + e + "px" })) : ($(".search-clear-icon").hide(), $(this).css({ "padding-right": $(".dropdown-wrapper").outerWidth() + 20 + "px" })) }), i.focus(function () { $(this).val().length > 0 && ($(".search-clear-icon").show(), $(this).css({ "padding-right": $(".dropdown-wrapper").outerWidth() + e + "px" })) }), setTimeout(function () { i.val().length > 0 ? ($(".search-clear-icon").show(), $(this).css({ "padding-right": $(".dropdown-wrapper").outerWidth() + e + "px" })) : ($(".search-clear-icon").hide(), $(this).css({ "padding-right": $(".dropdown-wrapper").outerWidth() + 20 + "px" })) }, 5e3), $(".search-clear-icon").click(function () { i.val("").css("padding-right", "80px").focus(), $(this).hide() }), $(document).on("click", function (e) { $(e.target).parents("div").hasClass("input-group-addon") || "qt" == $(e.target).attr("id") || "search" == $(e.target).attr("id") || ($(".input-group, .search-bar").removeClass("foc-qt"), $(".input-group-addon, .search-clear-icon").hide(), i.val().length < 1 && i.css({ "padding-right": $(".dropdown-wrapper").outerWidth() + 20 + "px" })) }), $(i).find(".input-group-addon").click(function () { $(this).addClass("active") }), i.keyup(function (a) { $(this).val().length > 0 ? ($(".search-clear-icon").show(), $(this).closest(".input-group, .search-bar").addClass("foc-qt"), $(".input-group-addon").show(), $(this).css({ "padding-right": $(".dropdown-wrapper").outerWidth() + e + "px" })) : ($(".search-clear-icon").hide(), $(this).css({ "padding-right": $(".dropdown-wrapper").outerWidth() + 20 + "px" })) }), i.keypress(function (e) { 13 === (e.keyCode || e.which) && setNormalSearchGTM("Press Enter") }) } $(".visual-image-search-holder").click(function (e) { if (!$(".visual-image-search-container").is(":animated")) { e.stopPropagation(), setReverseImageIconClickGTM(), $(".visual-image-search-container").show(); var a = $(window).scrollTop(); $(".visual-image-search-container").animate({ top: $(window).width() < 768 ? "0px" : a + 40 + "px" }, 500, function () { $(".visual-image-search-bg, .visual-image-search-container").fadeIn(), $("body").css("width", window.innerWidth - (window.innerWidth - document.body.clientWidth) + "px"), $("body").addClass("no-scroll-bd") }), $(".visual-image-search-container #imgfinder").val(""), $(".visual-image-search-container .t1").find(".foot-msgs").html(visualSearchResources.YouCanUploadJPG).removeClass("error-msg"), $(".visual-image-search-container .t2").find(".foot-msgs").html(visualSearchResources.YourImageLinkShouldEndWith).removeClass("error-msg") } }), $(".visual-image-search-container .icon-close, .visual-image-search-bg").click(function () { $(".visual-image-search-container").animate({ top: -($(".visual-image-search-container").outerHeight() + 500) + "px" }, 200, function () { $(".visual-image-search-bg, .visual-image-search-container").fadeOut(), setTimeout(function () { $("body").removeClass("no-scroll-bd"), $("body").css("width", "100%") }, 260) }) }), $(".visual-image-search-container").find("li").click(function () { setReverseImageTabClickGTM($(this)), $(".visual-image-search-container li").removeClass("active on"), $(this).addClass("active on"), $(".img-tab").hide(), $(".img-tab").eq($(this).index()).show() }), a && isDragDrop || ($(".input-group-addon").addClass("no-reverse-search"), void 0 !== i && (i.val().length > 0 ? ($(".search-clear-icon").show(), i.css({ "padding-right": $(".dropdown-wrapper").outerWidth() + e + "px" })) : ($(".search-clear-icon").hide(), i.css({ "padding-right": $(".dropdown-wrapper").outerWidth() + 20 + "px" })))), $(".visual-image-search-container .drop-btn button").click(function () { $("#fileupload").trigger("click") }); var r = !1; $(".img-tab.t1 .up-sec").on("drag dragstart dragend dragover dragenter dragleave drop", function (e) { e.preventDefault(), e.stopPropagation() }).on("dragover dragenter", function () { isDragDrop && $(".img-tab.t1 .up-sec").addClass("drag-over") }).on("dragleave dragend drop", function () { $(".img-tab.t1 .up-sec").removeClass("drag-over") }).on("drop", function (e) { isDragDrop && (r = e.originalEvent.dataTransfer.files, $(".img-tab.t1 .up-sec").find('input[type="file"]').prop("files", r), readVisualSearchImage(e.originalEvent.dataTransfer.files)) }), $("#fileupload").change(function () { readVisualSearchImage(document.getElementById("fileupload").files) }), $(".search-wrap, .form-search, .search-bar").find('[name="submitsearch"]').click(function () { i.is(":focus") || setNormalSearchGTM("Magnifier icon click") }), $("#alamy-livesearch-container, .auto-search-results").on("click", "li", function () { var e = $(this).text(); setSuggestionClickGTM(e) }) }); var setReverseImageIconClickGTM = function () { return objGTM1 = new GTM1, objGTM1.setValueswithCategory("Search Bar", "Reverse Image icon click", "", ""), !0 }, setReverseImageTabClickGTM = function (e) { var a = ""; return e.hasClass("active") || (a = 0 == e.index() ? "Upload an image" : "Paste image link", objGTM1 = new GTM1, objGTM1.setValueswithCategory("Search Bar", "Reverse image tab click", a, "")), !0 }, setReverseImageSearchGTM = function (e) { return objGTM1 = new GTM1, objGTM1.setValueswithCategory("Search Bar", "Reverse image search", e, ""), !0 }, setSearchOptionsDropdownChangeGTM = function (e) { return objGTM1 = new GTM1, objGTM1.setValueswithCategory("Search Bar", "Dropdown", e, ""), !0 }, setNormalSearchGTM = function (e) { var a = $("#select_searchoptions").attr("selected-value"), i = searchOptionEventsArr["OptionValue_" + a]; return void 0 !== i && (objGTM1 = new GTM1, objGTM1.setValueswithCategory("Search Bar", e, i, "")), !0 }, setSuggestionClickGTM = function (e) { return void 0 !== e && (objGTM1 = new GTM1, objGTM1.setValueswithCategory("Search Bar", "Suggestion click", e, "")), !0 };